# Flow
The entire flow consists of two main services that work together to process and manage orders.
1. cashinvoice-auth-service - handles user authentication and JWT token generation.
2. cashinvoice-order-service - create order and save the order as a JSON file.
3. cashinvoice-integration-service - poll the order JSON file and process it further (e.g., send to an external system).



# cashinvoice-order-service

This is a Spring Bootâ€“based Order Service responsible for managing customer orders in the Cashinvoice system.
The service exposes REST APIs for creating and retrieving orders and persists each order as a JSON file
in the local filesystem.

As per the assignment requirements, **all Order APIs are secured** and can only be accessed using a
valid **Bearer JWT token** generated by the `cashinvoice-auth-service`.

---

## Technology Stack

Java        : 21  
Spring Boot : 3.3.5  
Build Tool  : Maven  

---

## Authentication & Authorization

This service acts as a **Resource Server** and validates JWT tokens issued by the
`cashinvoice-auth-service`.

### Authentication
- All REST APIs require a valid JWT access token.
- The token must be passed in the request header as:

```
Authorization: Bearer <access-token>
```

- Tokens are validated using the shared HS256 secret.

### Authorization
The following roles are supported:

- **ADMIN**
  - Can create orders
  - Can view all orders

- **USER**
  - Can create orders
  - Can view only their own orders

Authorization is enforced using role-based access control at the API level.

---

## Build and Run Instructions

### 1. Build the Project

From the project root directory, run:

```
mvn clean package
```

This command generates an executable JAR file in the `target` directory.

### 2. Run the Application

Navigate to the `target` directory and run:

```
java -jar order-service-0.0.1-SNAPSHOT.jar
```

Once started, the application will run on:

```
http://localhost:9091
```

---

## API Documentation (Swagger / OpenAPI)

The application exposes API documentation using SpringDoc OpenAPI.

Swagger UI can be accessed at:

```
http://localhost:9091/swagger-ui/index.html
```

> Note: To invoke secured APIs from Swagger UI, click **Authorize** and provide
> a valid Bearer token generated by the Authentication Service.

---

## Available API Endpoints

The Order Service supports the following operations:

- Create Order
- Get Order by Order ID
- Get Orders by Customer ID

All endpoints require a valid JWT token for access.

---

## File Persistence

Along with API processing, the service performs file-based persistence:

- Each created order is written as a JSON file
- JSON files are stored in the following directory:

```
input/orders
```

---

## Notes

- Java 21 must be installed and configured before running the application.
- Ensure port `9091` is available on the local machine.
- The Authentication Service must be running to generate JWT tokens required
  for accessing Order APIs.
